<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Info PWA -->
    <link rel="manifest" href="../../manifest.json">
    <meta name="theme-color" content="#E6EBF5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="../../img/180.png" sizes="180x180">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../../css/bootstrap.min.css">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <!-- App styles -->
    <link rel="stylesheet" href="../../css/styles.css">
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <title>Enfermero - Panel</title>
</head>

<body>

    <div class="w-100 bg-white px-4 py-3 shadow-sm mb-3 d-flex justify-content-between align-items-center">

        <h5 class="section-title m-0">Panel de Enfermero</h5>

        <!-- Botón de Logout alineado a la derecha -->
        <button id="logoutNurse" class="logout-btn" onclick="logout()">
            <i class="bi bi-box-arrow-right"></i> Cerrar sesión
        </button>
    </div>

    <div class="container-fluid" style="max-width: 1200px;">

        <!-- NOTIFICACIONES DE ALERTA -->
        <div class="card-panel p-3 mb-3">
            <div class="d-flex justify-content-between align-items-center">
                <span class="fw-semibold text-dark">Notificaciones de Alerta</span>
                <div class="form-check form-switch m-0">
                    <input class="form-check-input" type="checkbox" id="alertsToggle" checked>
                </div>
            </div>
        </div>

        <!-- BOTÓN QR -->
        <button class="btn btn-qr w-100 py-3 mb-4 d-flex justify-content-center align-items-center " id="btn-scan-qr">
            <i class="bi bi-qr-code me-2"></i>
            Escanear Código QR
        </button>

        <!-- ACCORDION -->
        <div class="accordion mb-3" id="nurseAccordion">

            <!-- ALERTAS ACTIVAS -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingAlerts">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseAlerts" aria-expanded="false">
                        <i class="bi bi-exclamation-triangle-fill text-danger me-2"></i>
                        <span class="fw-bold text-danger">Alertas Activas (<span id="alerts-count">0</span>)</span>
                    </button>
                </h2>

                <div id="collapseAlerts" class="accordion-collapse collapse">
                    <div class="accordion-body">

                        <!-- LISTA DE ALERTAS -->
                        <div id="alerts-list">
                            <!-- alertas se inyectan por JS -->
                        </div>

                    </div>
                </div>
            </div>

            <!-- MIS CAMAS ASIGNADAS -->
            <div class="accordion-item mt-3">
                <h2 class="accordion-header" id="headingBeds">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseBeds" aria-expanded="true">
                        <i class="bi bi-hospital me-2"></i>
                        <span class="fw-bold">Mis Camas Asignadas (<span id="beds-count">0</span>)</span>
                    </button>
                </h2>

                <div id="collapseBeds" class="accordion-collapse collapse show">
                    <div class="accordion-body">

                        <!-- GRID DE CAMAS -->
                        <div id="beds-grid" class="row g-3">
                            <!-- cards se generan por JS -->
                        </div>

                    </div>

                </div>
            </div>

        </div>

    </div>

    <!-- Modal Cámara QR -->
    <div class="modal fade" id="qrModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-fullscreen-sm-down">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title">Escanear Código QR</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body text-center">
                    <video id="qrVideo" autoplay playsinline style="width: 100%; border-radius: 12px;"></video>
                    <div id="qrResult" class="mt-3 fw-bold text-primary"></div>
                </div>

            </div>
        </div>
    </div>



    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    <script src="/js/nurse/nurse.js"></script>

</body>

</html>